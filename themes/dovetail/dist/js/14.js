(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{266:function(e,t,r){"use strict";r.r(t);var a=r(17),s=r(34),o=r(9);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={computed:{filter:function(){}},data:function(){return{api:a.a,resource:new s.a,search:null}},methods:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(o.b)({showDialog:"dialog/show",hideDialog:"dialog/hide",errorDialog:"dialog/error",showSnackbar:"snackbar/show",loadDialog:"dialog/loading"}),{getResource:function(){var e=this;axios.get(a.a.show(this.$route.params.id)).then((function(t){e.resource.data=t.data.data,e.resource.data.permissions=_(t.data.data.permissions).groupBy("group").map((function(e,t){return{name:_(t).startCase(),id:t,children:e.map((function(e){return _.merge(e,{id:e.code})}))}})).value()})).finally((function(){e.resource.loading=!1}))},askUserToDestroyResource:function(e){var t=this;this.showDialog({color:"warning",illustration:function(){return Promise.resolve().then(r.bind(null,21))},illustrationWidth:200,illustrationHeight:160,width:"420",title:trans("You are about to move to trash the selected role."),text:[trans("The user will be signed out from the app. Some data related to the account like comments and files will still remain."),trans("Are you sure you want to deactivate and move :name to Trash?",{name:e.data.name})],buttons:{cancel:{show:!0,color:"link"},action:{text:trans("Move to Trash"),color:"warning",callback:function(r){t.loadDialog(!0),t.destroyResource(e)}}}})},destroyResource:function(e){var t=this;e.loading=!0,axios.delete(a.a.destroy(e.data.id)).then((function(e){t.hideDialog(),t.showSnackbar({show:!0,text:trans_choice("Role successfully moved to trash",1)}),t.$router.push({name:"roles.index"})})).catch((function(e){t.errorDialog({width:400,buttons:{cancel:{show:!1}},title:trans("Whoops! An error occured"),text:e.response.data.message})})).finally((function(){e.loading=!1}))}}),mounted:function(){this.getResource()}},l=r(1),d=r(3),u=r.n(d),h=r(247),v=r(2),m=r(480),f=r(240),p=r(67),b=r(38),g=r(304),w=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("admin",[r("metatag",{attrs:{title:e.resource.data.name}}),e._v(" "),r("page-header",{attrs:{back:{to:{name:"roles.index"},text:e.trans("Roles")}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.resource.data.name))]},proxy:!0},{key:"utilities",fn:function(){return[r("can",{attrs:{code:"roles.show"}},[r("router-link",{staticClass:"dt-link text--decoration-none mr-6",attrs:{tag:"a",exact:"",to:{name:"roles.edit"}}},[r("v-icon",{staticClass:"mb-1",attrs:{small:""}},[e._v("mdi-pencil-outline")]),e._v("\n          "+e._s(e.trans("Edit"))+"\n        ")],1)],1),e._v(" "),r("can",{attrs:{code:"roles.destroy"}},[r("a",{staticClass:"dt-link text--decoration-none mr-6",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.askUserToDestroyResource(e.resource)}}},[r("v-icon",{staticClass:"mb-1",attrs:{small:""}},[e._v("mdi-delete-outline")]),e._v("\n          "+e._s(e.trans("Move to Trash"))+"\n        ")],1)])]},proxy:!0}])}),e._v(" "),r("v-col",{attrs:{cols:"12",md:"7"}},[r("v-card",[r("v-card-text",[r("h2",[e._v(e._s(e.resource.data.name))]),e._v(" "),r("p",[e._v(e._s(e.resource.data.code))]),e._v(" "),r("p",[e._v(e._s(e.resource.data.description))])]),e._v(" "),r("div",{staticClass:"d-flex"},[r("v-divider"),e._v(" "),r("v-icon",{staticClass:"mx-3 mt-n2",attrs:{small:"",color:"muted"}},[e._v("mdi-shield-lock")]),e._v(" "),r("v-divider")],1),e._v(" "),r("v-card-text",[r("h4",{staticClass:"mb-5"},[e._v(e._s(e.trans("Permissions")))]),e._v(" "),r("v-text-field",{staticClass:"dt-text-field__search mb-3",attrs:{placeholder:e.trans("Search..."),autofocus:"","clear-icon":"mdi-close-circle-outline",clearable:"",filled:"",flat:"","full-width":"","hide-details":"","single-line":"",solo:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),r("v-treeview",{attrs:{filter:e.filter,items:e.resource.data.permissions,search:e.search,color:"primary","expand-icon":"mdi-chevron-down",hoverable:"","open-on-click":"",ripple:"",transition:""},scopedSlots:e._u([{key:"prepend",fn:function(t){return[t.item.children?r("v-icon",{attrs:{small:"",right:""}},[e._v("\n              mdi-shield-lock\n            ")]):r("v-icon",{staticClass:"ml-n4",attrs:{small:"",left:""}},[e._v("mdi-circle-outline")])]}},{key:"label",fn:function(t){var a=t.item;return[r("div",{staticClass:"pa-3"},[a.children?r("div",{class:a.children?"":"muted--text"},[e._v("\n                "+e._s(a.name)+"\n              ")]):r("div",[r("div",{staticClass:"mb-2"},[e._v(e._s(a.code))]),e._v(" "),r("div",{staticClass:"text-wrap muted--text body-2"},[e._v("\n                  "+e._s(a.description)+"\n                ")])])])]}}]),model:{value:e.resource.selected,callback:function(t){e.$set(e.resource,"selected",t)},expression:"resource.selected"}})],1)],1)],1)],1)}),[],!1,null,null,null);t.default=w.exports;u()(w,{VCard:h.a,VCardText:v.c,VCol:m.a,VDivider:f.a,VIcon:p.a,VTextField:b.a,VTreeview:g.a})},34:function(e,t,r){"use strict";t.a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loading=!1,this.isPrestine=!0,this.isValid=!0,this.errors=[],this.permissions=[],this.selected=[],this.data={name:"",alias:"",code:"",description:"",created:"",permissions:[],selected:[]}}}}]);
//# sourceMappingURL=14.js.map
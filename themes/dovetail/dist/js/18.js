(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{11:function(t,e,s){"use strict";e.a={list:function(){return"/api/v1/customers"},owned:function(){return"/api/v1/customers/owned"},store:function(){return"/api/v1/customers"},show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/".concat(t)},restore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/restore/".concat(t)},update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/".concat(t)},trashed:function(){return"/api/v1/customers/trashed"},destroy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/".concat(t)},delete:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/delete/".concat(t)},overall:function(t,e,s){return"/api/v1/reports/overall/customer/".concat(t,"/user/").concat(e,"?month=").concat(s)},financialRatio:function(t){return"/api/v1/customer/".concat(t,"/financial-ratios")},financialRatioDelete:function(t){return"/api/v1/customers/".concat(t.customer_id,"/ratios/").concat(t.id,"/delete")},indices:{list:function(){return"/api/v1/indices"}},surveys:{submit:function(t){return"/api/v1/surveys/".concat(t,"/submit")},show:function(t){return"/api/v1/surveys/".concat(t)}},crm:{search:function(t){return"/api/v1/crm/customers/search/".concat(t)},update:function(){return"/api/v1/crm/customers/update"},save:function(){return"/api/v1/crm/customers/save"},sendDocument:function(){return"/api/v1/crm/report/send"},sendFinancial:function(){return"/api/v1/crm/financial/send"},sendUpdateVisit:function(){return"/api/v1/crm/visit-update/send"},sendAddFinancialsByFileNo:function(){return"/api/v1/crm/financial-file-no/send"}},reports:{list:function(t){return"/api/v1/customers/".concat(t,"/reports")},generate:function(t){return"/api/v1/reports/".concat(t,"/generate")},download:function(t){return"/api/v1/reports/".concat(t,"/download")},delete:function(t){return"/api/v1/reports/".concat(t)},financialRatio:function(t,e){return"/api/v1/reports/financial-ratio/customers/".concat(t,"/users/").concat(e,"/financial-ratio")}}}},320:function(t,e,s){"use strict";s.r(e);var i=s(9),n=s(11),r=s(36),a=s(6);function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c={computed:{_:function(){return window._},companyId:function(){return this.$route.params.id},progress:function(){var t=Object.values(this.resource.data["fields:grouped"]||{}).map((function(t){return t})).flat().filter((function(t){return void 0!==t.selected})).map((function(t){return t.selected}));return parseFloat(100*t.length/this.resource.data.fields.length).toFixed(0)}},data:function(){return{taxonomy_item:null,api:n.a,rates:[{number:"1",text:"No existing processes & practices"},{number:"2",text:"Processes present but not practised"},{number:"3",text:"Processes are poorly practiced"},{number:"4",text:"Processes practised effectively by some"},{number:"5",text:"Processes practised effectively by most"},{number:"N/A",text:"Not Applicable"}],sdmiRatesOne:[{number:"1",text:"Strongly Disagree"},{number:"2",text:"Disagree"},{number:"3",text:"Moderately Agree"},{number:"4",text:"Agree"},{number:"5",text:"Strongly Agree"}],sdmiRatesTwo:[{number:"<10%",text:"<10%"},{number:"10% - 25%",text:"10% - 25%"},{number:">25% - 50%",text:">25% - 50%"},{number:">50% - 75%",text:">50% - 75%"},{number:">75% - 100%",text:">75% - 100%"}],sdmiRatesThree:[{number:"1",text:"Minimum standards required by the authorities are met"},{number:"1",text:"Critical certifications and standards are acquired to maintain high standards in the business\t"},{number:"3",text:"Certifications and Standards acquired over and above requirements to drive business growth & innovation"},{number:"5",text:"I am not aware of any industry standards or certifications required"},{number:"NA",text:"There are no industry standardsrequired in my business"}],sdmiRatesFour:[{number:"1",text:"Least Satisfied"},{number:"2",text:"Least Satisfied"},{number:"3",text:"Satisfied"},{number:"4",text:"Satisfied"},{number:"5",text:"Very Satisfied"}],extentServicesRates:[{number:"<10%",text:"<10%"},{number:"10% - 25%",text:"10% - 25%"},{number:">25% - 50%",text:">25% - 50%"},{number:">50% - 75%",text:">50% - 75%"},{number:">75% - 100%",text:">75% - 100%"},{number:"N/A",text:"NA"}],answers:[],resource:new r.a,auth:i.default.getUser(),submitting:!1}},methods:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){u(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},Object(a.b)({showDialog:"dialog/show",hideDialog:"dialog/hide",errorDialog:"dialog/error",showSnackbar:"snackbar/show",loadDialog:"dialog/loading"}),{getRates:function(t,e){return"Business Expansion"!==t&&"Marketing Strategies"!==t||"Extent products/or services are ready to be exported"===e.title?"Extent products/or services are ready to be exported"===e.title?this.extentServicesRates:"Capacity Utilisation"===t?this.sdmiRatesTwo:"Endorsement, Certification & Standards"===t?this.sdmiRatesThree:this.sdmiRatesFour:this.sdmiRatesOne},submit:_.debounce((function(t){var e=this,s=new FormData(this.$refs["survey-submission-form"]);axios.post(n.a.surveys.submit(this.$route.params.survey),s).then((function(t){e.showSnackbar({text:trans("Survey successfully submitted")}),e.$router.push({name:"companies.show",params:{id:e.$route.params.id}})})).finally((function(){e.submitting=!1}))}),100),choose:function(t,e,s){this.answers.filter((function(e){return e.id==t.id})).length?this.answers.forEach((function(s){s.id==t.id&&(s.answer=e)})):this.answers.push({id:t.id,item:t,answer:e,keyField:s})},getResource:function(){var t=this;this.resource.loading=!0,axios.get(n.a.surveys.show(this.$route.params.survey)).then((function(e){t.resource.data=e.data.data})).finally((function(){t.resource.loading=!1}))},askUserToDestroyResource:function(t){var e=this;this.showDialog({color:"warning",illustration:function(){return Promise.resolve().then(s.bind(null,16))},illustrationWidth:200,illustrationHeight:160,width:"420",title:trans("You are about to move to trash the selected survey."),text:[trans("Some data related to survey will still remain."),trans("Are you sure you want to deactivate and move :name to Trash?",{name:t.data.name})],buttons:{cancel:{show:!0,color:"link"},action:{text:trans("Move to Trash"),color:"warning",callback:function(s){e.loadDialog(!0),e.destroyResource(t)}}}})},destroyResource:function(t){var e=this;t.loading=!0,axios.delete(n.a.destroy(t.data.id)).then((function(t){e.hideDialog(),e.showSnackbar({show:!0,text:trans_choice("Survey successfully moved to trash",1)}),e.$router.push({name:"surveys.index"})})).catch((function(t){e.errorDialog({width:400,buttons:{cancel:{show:!1}},title:trans("Whoops! An error occured"),text:t.response.data.message})})).finally((function(){t.loading=!1}))},saveDummyData:function(){for(var t=this,e={fields:[]},s=this.resource.data.fields,i=s.length-1;i>=0;i--)e.fields.push({id:s[i].id,submission:{results:Math.floor(5*Math.random())+1,submissible_id:s[i].id,submissible_type:"Survey\\Models\\Field",user_id:this.auth.id,customer_id:this.companyId}});axios.post(n.a.surveys.submit(this.$route.params.survey),e).then((function(e){t.showSnackbar({text:trans("Survey successfully submitted")}),t.$router.push({name:"companies.show",params:{id:t.$route.params.id}})})).finally((function(){t.submitting=!1}))},checkField:function(t){return["What is the current utilisation of your business capacity?","Extent products/or services are ready to be exported"].includes(t.title)?"dt-chip2":"dt-chip"}}),mounted:function(){this.getResource(),"strategy-development-and-management-index"===this.$route.params.taxonomy&&(this.taxonomy_item="sdmi")},watch:{submitting:function(t){t||this.hideDialog()}}},l=s(0),d=s(2),m=s.n(d),p=s(114),v=s(279),f=s(1),b=s(616),y=s(617),h=s(100),g=s(365),x=s(49),w=s(618),k=s(624),P=s(51),S=s.n(P),$=s(34),C=Object(l.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("admin",[s("metatag",{attrs:{title:t.resource.data.title}}),t._v(" "),s("back-to-top"),t._v(" "),s("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["ctrl","alt","."],expression:"['ctrl', 'alt', '.']",modifiers:{once:!0}}],on:{shortkey:t.saveDummyData}}),t._v(" "),s("form",{ref:"survey-submission-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("page-header",{scopedSlots:t._u([{key:"back",fn:function(){return[s("div",{staticClass:"mb-2"},[s("can",{attrs:{code:"customers.show"},scopedSlots:t._u([{key:"unpermitted",fn:function(){return[s("router-link",{staticClass:"text--decoration-none body-1 dt-link",attrs:{tag:"a",exact:"",to:{name:"companies.owned"}}},[s("v-icon",{staticClass:"mb-1",attrs:{small:""}},[t._v("mdi mdi-chevron-left")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.trans("Back"))}})],1)]},proxy:!0}])},[s("router-link",{staticClass:"text--decoration-none body-1 dt-link",attrs:{tag:"a",exact:"",to:{name:"companies.show",params:{id:t.$route.params.id}}}},[s("v-icon",{staticClass:"mb-1",attrs:{small:""}},[t._v("mdi mdi-chevron-left")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.trans("Back"))}})],1)],1)],1)]},proxy:!0},{key:"title",fn:function(){return[t._v(t._s(t.resource.data.title))]},proxy:!0},{key:"action",fn:function(){return[s("survey-monthly-picker")]},proxy:!0}])}),t._v(" "),t.resource.loading?[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("skeleton",{attrs:{type:"article"}})],1),t._v(" "),s("v-col",{attrs:{cols:"12"}},[s("skeleton",{attrs:{type:"article"}})],1),t._v(" "),s("v-col",{attrs:{cols:"12"}},[s("skeleton",{attrs:{type:"article"}})],1)],1)]:["sdmi"!==t.taxonomy_item?s("v-card",[s("criteria"),t._v(" "),t._l(t.resource.data["fields:grouped"],(function(e,i){return[s("v-card-text",{key:i,staticClass:"text-center"},[s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"12",md:"10"}},[s("p",{staticClass:"mb-0 font-weight-bold",class:t.$vuetify.breakpoint.smAndUp?"headline py-4":"subtitle-2"},[t._v("\n                  "+t._s(t.trans(i))+"\n                ")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e[0].metadata.group_arabic)}})]),t._v(" "),t._l(e,(function(e,i){return s("v-col",{key:i,attrs:{cols:"12",md:"10"}},[s("v-row",[s("v-col",{class:t.$vuetify.breakpoint.smAndUp?"":"pa-0",attrs:{cols:"12",md:"auto"}},[s("span",{staticClass:"text--text muted--text font-weight-bold",class:t.$vuetify.breakpoint.smAndUp?"display-1":"title",domProps:{innerHTML:t._s(e.sort)}})]),t._v(" "),s("v-col",{class:t.$vuetify.breakpoint.smAndUp?"":"pa-0"},[s("p",{class:t.$vuetify.breakpoint.smAndUp?"title":null},[t._v(t._s(t.trans(e.title)))]),t._v(" "),s("p",{staticClass:"rtl-text",class:t.$vuetify.breakpoint.smAndUp?"title":null},[t._v(t._s(t.trans(e.metadata.title_arabic)))])])],1),t._v(" "),s("v-item-group",{staticClass:"mb-4",attrs:{"active-class":"primary"},model:{value:e.selected,callback:function(s){t.$set(e,"selected",s)},expression:"field.selected"}},[s("v-container",{class:t.$vuetify.breakpoint.smAndUp?"":"pa-0"},[s("v-row",{attrs:{justify:"space-around","no-gutters":""}},t._l(t.rates,(function(n,r){return s("v-col",{key:r,attrs:{id:"scrollto-"+e.id+"-"+(i+1)}},[s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on;return[s("v-item",{scopedSlots:t._u([{key:"default",fn:function(r){var o=r.active,u=r.toggle;return[s("div",t._g({directives:[{name:"ripple",rawName:"v-ripple"},{name:"scroll-to",rawName:"v-scroll-to",value:{el:"#scrollto-"+e.id+"-"+(parseInt(i)+1),duration:700},expression:"{ el: `#scrollto-${field.id+'-'+(parseInt(i)+1)}`, duration: 700 }"}],staticClass:"dt-chip",attrs:{color:o?"primary":null},on:{click:function(s){t.choose(e,n,i),u()}}},t.$vuetify.breakpoint.smAndUp?a:null),[s("span",{class:o?"white--text":"muted--text"},[t._v("\n                                  "+t._s(n.number)+"\n                                ")])])]}}],null,!0)})]}}],null,!0)},[t._v(" "),s("span",[t._v(t._s(n.text))])])],1)})),1)],1)],1)],1)}))],2)],1)]})),t._v(" "),t._l(t.answers,(function(e,i){return[s("input",{attrs:{type:"hidden",name:"fields["+i+"][id]"},domProps:{value:e.item.id}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][score]"},domProps:{value:e.answer.number}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][results]"},domProps:{value:e.answer.number}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][submissible_id]"},domProps:{value:e.item.id}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][submissible_type]",value:"Survey\\Models\\Field"}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][user_id]"},domProps:{value:t.auth.id}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][customer_id]"},domProps:{value:t.companyId}})]})),t._v(" "),s("v-card-text",{staticClass:"text-center"},[s("v-btn",{attrs:{disabled:t.progress<100||t.submitting,color:"primary","x-large":"",loading:t.submitting},on:{click:function(e){t.submit(),t.submitting=!0}}},[t._v("\n            "+t._s(t.trans("Submit"))+"\n            "),s("v-icon",{attrs:{right:""}},[t._v("mdi-arrow-right")])],1)],1)],2):t._e(),t._v(" "),"sdmi"==t.taxonomy_item?s("div",[t._l(t.resource.data["fields:grouped"],(function(e,i){return s("div",{key:i},[s("v-card",{key:i},["Business Expansion"===i?s("fifth-criteria-one"):t._e(),t._v(" "),"Business Expansion"!==i&&"Marketing Strategies"!==i&&"Capacity Utilisation"!==i&&"Endorsement, Certification & Standards"!==i?s("fifth-criteria-sec"):t._e(),t._v(" "),"Endorsement, Certification & Standards"===i?s("fifth-criteria-three"):t._e(),t._v(" "),s("v-card-text",{key:i,staticClass:"text-center"},[s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"12",md:"10"}},[s("p",{staticClass:"mb-0 font-weight-bold",class:t.$vuetify.breakpoint.smAndUp?"headline py-4":"subtitle-2"},[t._v("\n                    "+t._s(t.trans(i))+"\n                  ")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e[0].metadata.group_arabic)}})]),t._v(" "),t._l(e,(function(e,n){return s("v-col",{key:n,attrs:{cols:"12",md:"10"}},[s("v-row",[s("v-col",{class:t.$vuetify.breakpoint.smAndUp?"":"pa-0",attrs:{cols:"12",md:"auto"}},[s("span",{staticClass:"text--text muted--text font-weight-bold",class:t.$vuetify.breakpoint.smAndUp?"display-1":"title",domProps:{innerHTML:t._s(e.sort)}})]),t._v(" "),s("v-col",{class:t.$vuetify.breakpoint.smAndUp?"":"pa-0"},[s("p",{class:t.$vuetify.breakpoint.smAndUp?"title":null},[t._v(t._s(t.trans(e.title)))]),t._v(" "),s("p",{staticClass:"rtl-text",class:t.$vuetify.breakpoint.smAndUp?"title":null},[t._v(t._s(t.trans(e.metadata.title_arabic)))])])],1),t._v(" "),s("v-item-group",{staticClass:"mb-4",attrs:{"active-class":"primary"},model:{value:e.selected,callback:function(s){t.$set(e,"selected",s)},expression:"field.selected"}},[s("v-container",{class:t.$vuetify.breakpoint.smAndUp?"":"pa-0"},[s("v-row",{attrs:{justify:"space-around","no-gutters":""}},t._l(t.getRates(i,e),(function(r,a){return s("v-col",{key:a,attrs:{id:"scrollto-"+e.id+"-"+(n+1)}},[s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on;return[s("v-item",{scopedSlots:t._u([{key:"default",fn:function(a){var u=a.active,c=a.toggle;return["What is the current utilisation of your business capacity?"==e.title||"Extent products/or services are ready to be exported"==e.title?s("div",t._g({directives:[{name:"ripple",rawName:"v-ripple"},{name:"scroll-to",rawName:"v-scroll-to",value:{el:"#scrollto-"+e.id+"-"+(parseInt(n)+1),duration:700},expression:"{ el: `#scrollto-${field.id+'-'+(parseInt(i)+1)}`, duration: 700 }"}],staticClass:"dt-chip2",attrs:{color:u?"primary":null},on:{click:function(s){t.choose(e,r,i),c()}}},t.$vuetify.breakpoint.smAndUp?o:null),[s("span",{class:u?"white--text":"muted--text"},[t._v("\n                                    "+t._s(r.number)+"\n                                  ")])]):s("div",t._g({directives:[{name:"ripple",rawName:"v-ripple"},{name:"scroll-to",rawName:"v-scroll-to",value:{el:"#scrollto-"+e.id+"-"+(parseInt(n)+1),duration:700},expression:"{ el: `#scrollto-${field.id+'-'+(parseInt(i)+1)}`, duration: 700 }"}],staticClass:"dt-chip",attrs:{color:u?"primary":null},on:{click:function(s){t.choose(e,r,i),c()}}},t.$vuetify.breakpoint.smAndUp?o:null),[s("span",{class:u?"white--text":"muted--text"},[t._v("\n                                    "+t._s(r.number)+"\n                                  ")])])]}}],null,!0)})]}}],null,!0)},[t._v(" "),s("span",[t._v(t._s(r.text))])])],1)})),1)],1)],1)],1)}))],2)],1)],1)],1)})),t._v(" "),s("v-card",[t._l(t.answers,(function(e,i){return"sdmi"==t.taxonomy_item?[s("input",{attrs:{type:"hidden",name:"fields["+i+"][id]"},domProps:{value:e.item.id}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][fieldKey]"},domProps:{value:e.keyField}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][taxonomy]"},domProps:{value:"sdmi"}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][score]"},domProps:{value:e.answer.number}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][results]"},domProps:{value:e.answer.text}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][submissible_id]"},domProps:{value:e.item.id}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][submissible_type]",value:"Survey\\Models\\Field"}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][user_id]"},domProps:{value:t.auth.id}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][customer_id]"},domProps:{value:t.companyId}})]:t._l(t.answers,(function(e,i){return[s("input",{attrs:{type:"hidden",name:"fields["+i+"][id]"},domProps:{value:e.item.id}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][score]"},domProps:{value:e.answer.number}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][results]"},domProps:{value:e.answer.number}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][submissible_id]"},domProps:{value:e.item.id}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][submissible_type]",value:"Survey\\Models\\Field"}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][user_id]"},domProps:{value:t.auth.id}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"fields["+i+"][submission][customer_id]"},domProps:{value:t.companyId}})]}))})),t._v(" "),s("v-card-text",{staticClass:"text-center"},[s("v-btn",{attrs:{disabled:t.progress<100||t.submitting,color:"primary","x-large":"",loading:t.submitting},on:{click:function(e){t.submit(),t.submitting=!0}}},[t._v("\n              "+t._s(t.trans("Submit"))+"\n              "),s("v-icon",{attrs:{right:""}},[t._v("mdi-arrow-right")])],1)],1)],2)],2):t._e()]],2),t._v(" "),s("bottom-navigation",{model:{value:t.progress,callback:function(e){t.progress=e},expression:"progress"}})],1)}),[],!1,null,null,null);e.default=C.exports;m()(C,{VBtn:p.a,VCard:v.a,VCardText:f.c,VCol:b.a,VContainer:y.a,VIcon:h.a,VItem:g.b,VItemGroup:x.b,VRow:w.a,VTooltip:k.a}),S()(C,{Ripple:$.a})},36:function(t,e,s){"use strict";e.a=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loading=!1,this.isPrestine=!0,this.isValid=!0,this.errors=[],this.data={title:"",title_arabic:"",code:"",body:"",body_arabic:"",metadata:{title_arabic:"",body_arabic:""},type:"",user_id:"",created:"",indices:[],answer:"",fields:[{group:"",group_arabic:"",type:"",children:[]}]}}}}]);
//# sourceMappingURL=18.js.map
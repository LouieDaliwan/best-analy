(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{11:function(t,e,n){"use strict";e.a={list:function(){return"/api/v1/customers"},owned:function(){return"/api/v1/customers/owned"},store:function(){return"/api/v1/customers"},show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/".concat(t)},restore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/restore/".concat(t)},update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/".concat(t)},trashed:function(){return"/api/v1/customers/trashed"},destroy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/".concat(t)},delete:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/delete/".concat(t)},overall:function(t,e,n){return"/api/v1/reports/overall/customer/".concat(t,"/user/").concat(e,"?month=").concat(n)},financialRatio:function(t){return"/api/v1/customer/".concat(t,"/financial-ratios")},financialRatioDelete:function(t){return"/api/v1/customers/".concat(t.customer_id,"/ratios/").concat(t.id,"/delete")},indices:{list:function(){return"/api/v1/indices"}},surveys:{submit:function(t){return"/api/v1/surveys/".concat(t,"/submit")},show:function(t){return"/api/v1/surveys/".concat(t)}},crm:{search:function(t){return"/api/v1/crm/customers/search/".concat(t)},update:function(){return"/api/v1/crm/customers/update"},save:function(){return"/api/v1/crm/customers/save"},sendDocument:function(){return"/api/v1/crm/report/send"},sendFinancial:function(){return"/api/v1/crm/financial/send"},sendUpdateVisit:function(){return"/api/v1/crm/visit-update/send"},sendAddFinancialsByFileNo:function(){return"/api/v1/crm/financial-file-no/send"}},reports:{list:function(t){return"/api/v1/customers/".concat(t,"/reports")},generate:function(t){return"/api/v1/reports/".concat(t,"/generate")},download:function(t){return"/api/v1/reports/".concat(t,"/download")},delete:function(t){return"/api/v1/reports/".concat(t)},financialRatio:function(t,e){return"/api/v1/reports/financial-ratio/customers/".concat(t,"/users/").concat(e,"/financial-ratio")}}}},319:function(t,e,n){"use strict";n.r(e);var r=n(9),o=n(11),a={computed:{isFetchingResource:function(){return this.resource.loading},isFinishedFetchingResource:function(){return!this.resource.loading}},components:{SkeletonShow:n(79).a},data:function(){return{api:o.a,resource:{lang:window.localStorage.getItem("report:lang")||"en",loading:!1,file:{},data:{}},url:null}},methods:{getReportData:function(){var t=this,e=this.$route.params.id,n=this.$route.query.user_id||r.default.getId();axios.get(o.a.overall(e,n)).then((function(e){t.resource.file=e.data}))},previewPDFReport:function(t){var e=this.$route.query.lang||this.resource.lang;window.open("/best/reports/pdf/preview?report_id=".concat(t.id,"&month=").concat(t.month,"&lang=").concat(e),"_blank")},getReport:function(){var t=this;this.resource.loading=!0;var e=this.$route.query.lang||this.resource.lang;this.$router.push({query:{lang:e}}).catch((function(t){})),axios.get("/api/v1/reports/".concat(this.$route.params.report),{params:{lang:e}}).then((function(n){t.resource.data=n.data.data;var r=t.resource.data.value["current:index"].taxonomy.id||null,o=t.$route.query.type||"index";t.url="/best/preview/reports/".concat(t.$route.params.report,"?type=").concat(o,"&taxonomy_id=").concat(r,"&lang=").concat(e)})).finally((function(){t.resource.loading=!1}))},goToSurveyPage:function(t){this.$router.push({name:"companies.response",query:{month:t.remarks},params:{id:this.$route.params.id,taxonomy:t.value["current:index"].taxonomy.id||null,survey:t.value["survey:id"]}})},goToShowPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";window.localStorage.setItem("report:lang",t),this.resource.lang=t,this.$router.push({name:"reports.show",params:{id:this.$route.params.id,report:this.$route.params.report},query:{lang:t}}).catch((function(t){})),this.$router.go()},downloadReport:function(){window.location.href="/reports/".concat(this.$route.params.report,"/download")},setIframeHeight:function(){document.querySelector("#iframe-preview").addEventListener("load",(function(t){var e=this.contentWindow||this.contentDocument.parentWindow;e.document.body&&(this.height=e.document.documentElement.scrollHeight||e.document.body.scrollHeight)}))}},mounted:function(){this.setIframeHeight(),this.getReportData(),this.getReport()}},i=n(0),s=n(2),c=n.n(s),u=n(114),l=n(279),d=n(100),p=Object(i.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("admin",[n("metatag",{attrs:{title:t.trans("Find Company")}}),t._v(" "),n("page-header",{attrs:{back:{to:{name:"companies.reports"},text:t.trans("Back to Reports")}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.trans("Report Preview")))]},proxy:!0},{key:"utilities",fn:function(){return[t.resource.data?n("a",{staticClass:"dt-link text--decoration-none mr-4",on:{click:function(e){return e.preventDefault(),t.previewPDFReport(t.resource.data)}}},[n("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-file-pdf")]),t._v("\n        "+t._s(t.trans("Preview PDF Report"))+"\n      ")],1):t._e()]},proxy:!0},{key:"action",fn:function(){return["en"==t.resource.lang?n("v-btn",{attrs:{block:t.$vuetify.breakpoint.smAndDown,large:"",color:"primary"},on:{click:function(e){return t.goToShowPage("ar")}}},[n("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-earth")]),t._v("\n        "+t._s(t.trans("View Report in Arabic"))+"\n      ")],1):n("v-btn",{attrs:{block:t.$vuetify.breakpoint.smAndDown,large:"",color:"primary"},on:{click:function(e){return t.goToShowPage("en")}}},[n("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-earth")]),t._v("\n        "+t._s(t.trans("View Report in English"))+"\n      ")],1)]},proxy:!0}])}),t._v(" "),[n("v-card",{attrs:{outlined:""}},[n("iframe",{attrs:{width:"100%",id:"iframe-preview",src:t.url,frameborder:"0"}})])]],2)}),[],!1,null,null,null);e.default=p.exports;c()(p,{VBtn:u.a,VCard:l.a,VIcon:d.a})},79:function(t,e,n){"use strict";var r=n(0),o=n(2),a=n.n(o),i=n(616),s=n(618),c=n(631),u=Object(r.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("page-header",{attrs:{back:{to:{name:"companies.index"},text:this.trans("Companies")}},scopedSlots:this._u([{key:"title",fn:function(){return[e("v-skeleton-loader",{attrs:{type:"text"}})]},proxy:!0},{key:"action",fn:function(){return[e("v-skeleton-loader",{attrs:{type:"button",height:"50"}})]},proxy:!0}])}),this._v(" "),e("v-row",[e("v-col",{attrs:{cols:"12",md:"6"}},[e("v-skeleton-loader",{staticClass:"mb-4",attrs:{type:"image"}})],1),this._v(" "),e("v-col",{attrs:{cols:"12",md:"6"}},[e("v-skeleton-loader",{staticClass:"mb-4",attrs:{type:"image"}})],1),this._v(" "),e("v-col",{attrs:{cols:"12",md:"6"}},[e("v-skeleton-loader",{staticClass:"mb-4",attrs:{type:"image"}})],1),this._v(" "),e("v-col",{attrs:{cols:"12",md:"6"}},[e("v-skeleton-loader",{staticClass:"mb-4",attrs:{type:"image"}})],1)],1)],1)}),[],!1,null,null,null);e.a=u.exports;a()(u,{VCol:i.a,VRow:s.a,VSkeletonLoader:c.a})}}]);
//# sourceMappingURL=21.js.map
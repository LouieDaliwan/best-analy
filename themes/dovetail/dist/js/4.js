(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{26:function(e,t,a){"use strict";t.a={list:function(){return"/api/v1/indices"},store:function(){return"/api/v1/indices"},delete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/indices/delete/".concat(e)},restore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/indices/restore/".concat(e)},trashed:function(){return"/api/v1/indices/trashed"},show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/indices/".concat(e)},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/indices/".concat(e)},destroy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/indices/".concat(e)},translation:function(){return"/api/v1/best/settings/translations/keys"}}},27:function(e,t,a){"use strict";t.a={list:function(){return"/api/v1/surveys"},store:function(){return"/api/v1/surveys"},delete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/surveys/delete/".concat(e)},restore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/surveys/restore/".concat(e)},trashed:function(){return"/api/v1/surveys/trashed"},show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/surveys/".concat(e)},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/surveys/".concat(e)},destroy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/surveys/".concat(e)},submit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/surveys/".concat(e,"/submit")}}},305:function(e,t,a){"use strict";a.r(t);var r=a(9),s=a(27),n=a(36),i=a(70),o=a(6);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={beforeRouteLeave:function(e,t,a){this.isFormPrestine?a():this.askUserBeforeNavigatingAway(a)},components:{IndexPicker:i.a},computed:l({},Object(o.c)({isDense:"settings/fieldIsDense",shortkeyCtrlIsPressed:"shortkey/ctrlIsPressed"}),{isDesktop:function(){return this.$vuetify.breakpoint.mdAndUp},isInvalid:function(){return this.resource.isPrestine||this.resource.loading},isLoading:function(){return this.resource.loading},isFormDisabled:function(){return this.isInvalid||this.resource.isPrestine},isNotFormDisabled:function(){return!this.isFormDisabled},isFormPrestine:function(){return this.resource.isPrestine},isNotFormPrestine:function(){return!this.isFormPrestine},form:function(){return this.$refs.addform}}),data:function(){return{auth:r.default.getUser(),resource:new n.a}},methods:l({},Object(o.b)({showAlertbox:"alertbox/show",hideAlertbox:"alertbox/hide",showDialog:"dialog/show",hideDialog:"dialog/hide",showSnackbar:"snackbar/show",hideSnackbar:"snackbar/hide",showSuccessbox:"successbox/show",hideSuccessbox:"successbox/hide"}),{askUserBeforeNavigatingAway:function(e){var t=this;this.showDialog({illustration:function(){return Promise.resolve().then(a.bind(null,525))},title:trans("Unsaved changes will be lost"),text:trans("You have unsaved changes on this page. If you navigate away from this page, data will not be recovered."),buttons:{cancel:{text:trans("Go Back"),callback:function(){t.hideDialog()}},action:{text:trans("Discard"),callback:function(){e(),t.hideDialog()}}}})},askUserToDiscardUnsavedChanges:function(){var e=this;this.showDialog({illustration:function(){return Promise.resolve().then(a.bind(null,525))},title:trans("Discard changes?"),text:trans("You have unsaved changes on this page. If you navigate away from this page, data will not be recovered."),buttons:{cancel:{text:trans("Cancel"),callback:function(){e.hideDialog()}},action:{text:trans("Discard"),callback:function(){e.resource.isPrestine=!0,e.hideDialog(),e.$router.replace({name:"surveys.index"})}}}})},load:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.resource.loading=e},parseResourceData:function(e){_.clone(e);return new FormData(this.$refs["addform-form"].$el)},parseErrors:function(e){return this.form.setErrors(e),e=Object.values(e).flat(),this.resource.hasErrors=e.length,e},submitForm:function(){this.isNotFormDisabled&&(this.$refs["submit-button"].click(),window.scrollTo({top:0,left:0,behavior:"smooth"}))},submit:function(e){var t=this;this.load(),e.preventDefault(),this.hideAlertbox(),axios.post(s.a.store(),this.parseResourceData(this.resource.data)).then((function(e){t.resource.isPrestine=!0,t.showSnackbar({text:trans("Survey created successfully")}),t.$router.push({name:"surveys.edit",params:{id:e.data.id},query:{success:!0}}),t.showSuccessbox({text:trans("Created Survey {name}",{name:e.data.title}),buttons:{show:{code:"surveys.show",to:{name:"surveys.show",params:{id:e.data.id}},icon:"mdi-open-in-new",text:trans("View Details")},create:{code:"surveys.create",to:{name:"surveys.create"},icon:"mdi-shield-plus-outline",text:trans("Add New Survey")}}})})).catch((function(e){t.form.setErrors(e.response.data.errors)})).finally((function(){t.load(!1)}))}}),watch:{"resource.data":{handler:function(e){this.resource.isPrestine=!1,this.resource.hasErrors=this.$refs.addform.flags.invalid,this.resource.hasErrors||this.hideAlertbox()},deep:!0}}},v=a(0),p=a(2),f=a.n(p),m=a(587),h=a(104),b=a(262),y=a(1),g=a(580),x=a(581),w=a(265),k=a(5),P=a(594),D=a(91),C=a(582),S=a(583),O=a(48),j=a(585),V=a(20),I=Object(v.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("admin",{scopedSlots:e._u([{key:"appbar",fn:function(){return[a("v-container",{staticClass:"py-0 px-0"},[a("v-row",{attrs:{justify:"space-between",align:"center"}},[a("v-fade-transition",[e.isNotFormPrestine?a("v-col",{staticClass:"py-0",attrs:{cols:"auto"}},[a("v-toolbar-title",{staticClass:"muted--text"},[e._v(e._s(e.trans("Unsaved changes")))])],1):e._e()],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-col",{staticClass:"py-0",attrs:{cols:"auto"}},[a("div",{staticClass:"d-flex justify-end"},[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"ml-3 mr-0",attrs:{text:"",large:""},on:{click:e.askUserToDiscardUnsavedChanges}},[e._v(e._s(e.trans("Discard")))]),e._v(" "),a("v-badge",{staticClass:"dt-badge",attrs:{bordered:"",bottom:"",color:"dark",content:"s","offset-x":"20","offset-y":"20",tile:"",transition:"fade-transition"},model:{value:e.shortkeyCtrlIsPressed,callback:function(t){e.shortkeyCtrlIsPressed=t},expression:"shortkeyCtrlIsPressed"}},[a("v-btn",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["ctrl","s"],expression:"['ctrl', 's']",modifiers:{once:!0}}],ref:"submit-button-main",staticClass:"ml-3 mr-0",attrs:{disabled:e.isFormDisabled,loading:e.isLoading,color:"primary",large:"",type:"submit"},on:{click:function(t){return t.preventDefault(),e.submitForm(t)},shortkey:e.submitForm}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save-outline")]),e._v("\n                "+e._s(e.trans("Save"))+"\n              ")],1)],1)],1)])],1)],1)]},proxy:!0}])},[a("metatag",{attrs:{title:e.trans("Add Survey")}}),e._v(" "),e._v(" "),a("validation-observer",{ref:"addform",scopedSlots:e._u([{key:"default",fn:function(t){var r=t.handleSubmit;t.errors,t.invalid,t.passed;return[a("v-form",{ref:"addform-form",attrs:{disabled:e.isLoading,autocomplete:"false",enctype:"multipart/form-data"},on:{submit:function(t){t.preventDefault(),r(e.submit(t))}}},[a("button",{ref:"submit-button",staticClass:"d-none",attrs:{type:"submit"}}),e._v(" "),a("page-header",{attrs:{back:{to:{name:"surveys.index"},text:e.trans("Surveys")}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.trans("Add Survey")))]},proxy:!0}],null,!0)}),e._v(" "),a("alertbox"),e._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",md:"9"}},[a("v-card",[a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("validation-provider",{attrs:{vid:"title",name:e.trans("title"),rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("v-text-field",{staticClass:"dt-text-field",attrs:{dense:e.isDense,disabled:e.isLoading,"error-messages":r,label:e.trans("Survey Title"),autofocus:"",name:"title",outlined:""},model:{value:e.resource.data.title,callback:function(t){e.$set(e.resource.data,"title",t)},expression:"resource.data.title"}})]}}],null,!0)})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{staticClass:"dt-text-field",attrs:{dense:e.isDense,disabled:e.isLoading,label:e.trans("Survey Title (arabic)"),name:"metadata[title_arabic]",outlined:""}})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{staticClass:"dt-text-field",attrs:{label:e.trans("Survey Description"),"auto-grow":"",name:"body",outlined:""}})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{staticClass:"dt-text-field",attrs:{label:e.trans("Survey Description (arabic)"),"auto-grow":"","hide-details":"",name:"metadata[body_arabic]",outlined:""}})],1)],1),e._v(" "),a("input",{attrs:{type:"hidden",name:"code"},domProps:{value:e.slugify(e.resource.data.title)}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"type",value:"survey"}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"formable_type",value:"Index\\Models\\Index"}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"formable_id"},domProps:{value:e.resource.data.indices}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"user_id"},domProps:{value:e.auth.id}})],1),e._v(" "),a("div",{staticClass:"d-flex my-6"},[a("v-divider"),e._v(" "),a("span",{staticClass:"muted--text mx-3 mt-n3"},[a("strong",[e._v(e._s(e.trans("Fields")))])]),e._v(" "),a("v-divider")],1),e._v(" "),a("v-card-text",{staticClass:"selects"},[a("group-repeater",{attrs:{fields:1,disabled:e.isLoading},model:{value:e.resource.data.fields,callback:function(t){e.$set(e.resource.data,"fields",t)},expression:"resource.data.fields"}}),e._v(" "),e._l(e.resource.data.fields,(function(t,r){return[e._l(t.children,(function(s,n){return[a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][group]"},domProps:{value:t.group}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][type]",value:"likert"}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][title]"},domProps:{value:s.title}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][code]"},domProps:{value:e.slugify(s.title)}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][metadata][total]"},domProps:{value:s.total}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][metadata][wts]"},domProps:{value:s.wts}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][metadata][comment]"},domProps:{value:s.comment}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][metadata][category][Documentation]",value:""}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][metadata][category][Talent]",value:""}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][metadata][category][Technology]",value:""}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][metadata][category][Workflow Processes]",value:""}}),e._v(" "),e._l(s.categories,(function(e){return[a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][metadata][category]["+e+"]",value:"Y"}})]})),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][metadata][group_arabic]"},domProps:{value:t.group_arabic}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][metadata][title_arabic]"},domProps:{value:s.title_arabic}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"fields["+(t.group+r+n)+"][metadata][comment_arabic]"},domProps:{value:s.comment_arabic}})]}))]}))],2)],1)],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"3"}},[a("index-picker",{attrs:{dense:e.isDense,disabled:e.isLoading,name:"formable_id"},model:{value:e.resource.data.indices,callback:function(t){e.$set(e.resource.data,"indices",t)},expression:"resource.data.indices"}})],1)],1)],1)]}}])})],1)}),[],!1,null,null,null);t.default=I.exports;f()(I,{VBadge:m.a,VBtn:h.a,VCard:b.a,VCardText:y.c,VCol:g.a,VContainer:x.a,VDivider:w.a,VFadeTransition:k.c,VForm:P.a,VIcon:D.a,VRow:C.a,VSpacer:S.a,VTextField:O.a,VTextarea:j.a,VToolbarTitle:V.a})},36:function(e,t,a){"use strict";t.a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loading=!1,this.isPrestine=!0,this.isValid=!0,this.errors=[],this.data={title:"",title_arabic:"",code:"",body:"",body_arabic:"",metadata:{title_arabic:"",body_arabic:""},type:"",user_id:"",created:"",indices:[],answer:"",fields:[{group:"",group_arabic:"",type:"",children:[]}]}}},70:function(e,t,a){"use strict";var r=a(26),s={name:"IndexPicker",props:{value:{type:[Array,Object,String,Number]},dense:{type:Boolean},errors:{type:[Array,Object]},lazyLoad:{type:Boolean},illustration:{type:Boolean,default:!0}},computed:{index:{get:function(){return this.value[0]},set:function(e){this.$emit("input",[e])}},indices:function(){return this.items.map((function(e){return{value:e.id,text:e.name,icon:e.icon}}))}},data:function(){return{items:[]}},methods:{getIndexsData:function(){var e=this;window._.isEmpty(this.items)&&axios.get(r.a.list(),{params:{per_page:"-1"}}).then((function(t){e.items=t.data.data}))}},mounted:function(){this.lazyLoad||this.getIndexsData()}},n=a(0),i=a(2),o=a.n(i),d=a(262),l=a(1),c=a(42),u=Object(n.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"mb-3"},[a("v-card-title",[e._v(e._s(e.trans("Performance Index")))]),e._v(" "),e.illustration?a("div",{staticClass:"primary--text text-center"},[a("checklist-icon",{attrs:{width:"100",height:"100"}})],1):e._e(),e._v(" "),a("v-card-text",[a("validation-provider",{attrs:{vid:"indices",name:e.trans("indices"),rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("v-select",{ref:"indices",staticClass:"dt-text-field",attrs:{dense:e.dense,"error-messages":r,"hide-details":!r.length,items:e.indices,label:e.$tc("Select..."),"background-color":"selects","menu-props":"offsetY",name:"formable_id",outlined:""},on:{focus:e.getIndexsData},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("img",{staticClass:"mr-3",attrs:{src:r.icon,width:"20"}}),e._v(" "),a("span",{domProps:{textContent:e._s(r.text)}})]}}],null,!0),model:{value:e.index,callback:function(t){e.index=t},expression:"index"}})]}}])}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.index,expression:"index"}],attrs:{type:"hidden",name:"formable_id"},domProps:{value:e.index},on:{input:function(t){t.target.composing||(e.index=t.target.value)}}})],1)],1)}),[],!1,null,null,null);t.a=u.exports;o()(u,{VCard:d.a,VCardText:l.c,VCardTitle:l.d,VSelect:c.a})}}]);
//# sourceMappingURL=4.js.map
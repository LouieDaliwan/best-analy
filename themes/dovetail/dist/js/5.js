(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{18:function(t,e,r){"use strict";e.a={list:function(){return"/api/v1/customers"},store:function(){return"/api/v1/customers"},show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/".concat(t)},restore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/restore/".concat(t)},update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/".concat(t)},trashed:function(){return"/api/v1/customers/trashed"},destroy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/".concat(t)},delete:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"/api/v1/customers/delete/".concat(t)},indices:{list:function(){return"/api/v1/indices"}},surveys:{submit:function(t){return"/api/v1/surveys/".concat(t,"/submit")},show:function(t){return"/api/v1/surveys/".concat(t)}},crm:{search:function(t){return"/api/v1/crm/customers/search/".concat(t)},update:function(){return"/api/v1/crm/customers/update"}}}},264:function(t,e,r){"use strict";r.r(e);var s=r(18),n=r(35),o=r(1),a=r(2),i=r.n(a),c=r(529),l=r(531),u=r(542),p=Object(o.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("page-header",{attrs:{back:{to:{name:"companies.index"},text:this.trans("Companies")}},scopedSlots:this._u([{key:"title",fn:function(){return[e("v-skeleton-loader",{attrs:{type:"text"}})]},proxy:!0},{key:"action",fn:function(){return[e("v-skeleton-loader",{attrs:{type:"button",height:"50"}})]},proxy:!0}])}),this._v(" "),e("div",[e("v-skeleton-loader",{staticClass:"mb-4",attrs:{type:"text",width:"60%"}}),this._v(" "),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-skeleton-loader",{attrs:{type:"image",height:"200"}})],1),this._v(" "),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-skeleton-loader",{attrs:{type:"image",height:"200"}})],1),this._v(" "),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-skeleton-loader",{attrs:{type:"image",height:"200"}})],1),this._v(" "),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-skeleton-loader",{attrs:{type:"image",height:"200"}})],1)],1)],1)],1)}),[],!1,null,null,null),d=p.exports;i()(p,{VCol:c.a,VRow:l.a,VSkeletonLoader:u.a});var v=r(6);function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h={props:["items"],computed:{resourcesAreNotYetFinished:function(){return this.items.filter((function(t){return t["is:finished"]})).length!==this.items.length}},methods:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(v.b)({showDialog:"dialog/show",hideDialog:"dialog/hide"}),{getDialogOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({illustration:function(){return Promise.resolve().then(r.bind(null,486))},title:trans("Generating :name Report",{name:t.data.name}),text:['<i class="mdi mdi-spin mdi-loading mr-3"></i> Retrieving performance index submission...'],persistent:!0,color:"primary",buttons:{cancel:{show:!1},action:{show:!1}}},t)},exportOverall:function(){var t=this;this.showDialog(this.getDialogOptions({data:{name:"Overall"}}));var e={customer_id:this.$route.params.id};axios.post("/api/v1/reports/1/generate",e).then((function(e){t.showDialog(t.getDialogOptions({data:index,text:['<i class="mdi mdi-spin mdi-loading mr-3"></i> Crunching survey data...']})),t.serveOverallFileToBrowser(e.data,index)}))},exportReport:function(t){var e=this;this.showDialog(this.getDialogOptions({data:t}));var r={customer_id:this.$route.params.id,taxonomy_id:t.id};axios.post("/api/v1/reports/".concat(t.survey.id,"/generate"),r).then((function(r){e.showDialog(e.getDialogOptions({data:t,text:['<i class="mdi mdi-spin mdi-loading mr-3"></i> Crunching survey data...']})),e.serveFileToBrowser(r.data,t)}))},serveFileToBrowser:function(t,e){var r=this;t=Object.assign(t,{pcode:e.alias}),axios.post("/reports/download",t,{responseType:"arraybuffer"}).then((function(t){var s=new Blob([t.data],{type:"application/pdf"}),n=document.createElement("a");n.href=window.URL.createObjectURL(s),n.download="".concat(e.name," Report.pdf"),n.click(),r.hideDialog()}))},serveOverallFileToBrowser:function(t){var e=this;t=Object.assign(t),axios.post("/reports/download",t,{responseType:"arraybuffer"}).then((function(t){var r=new Blob([t.data],{type:"application/pdf"}),s=document.createElement("a");s.href=window.URL.createObjectURL(r),s.download="Overall Report.pdf",s.click(),e.hideDialog()}))}})},y=r(90),g=r(74),_=r(248),b=r(87),w=r(12),x=r(253),O=Object(o.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-menu",{attrs:{"open-on-hover":"","offset-y":"",bottom:"",transition:"slide-y-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[r("v-btn",t._g({attrs:{block:t.$vuetify.breakpoint.smAndDown,large:"",color:"primary"}},s),[r("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-download")]),t._v("\n      "+t._s(t.trans("Export Reports"))+"\n    ")],1)]}}])},[t._v(" "),r("v-list",{attrs:{dense:""}},[[t._l(t.items,(function(e,s){return r("v-list-item",{key:s,attrs:{disabled:!e["is:finished"]},on:{click:function(r){return t.exportReport(e)}}},[r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1)],1)})),t._v(" "),r("v-list-item",{attrs:{disabled:t.resourcesAreNotYetFinished},on:{click:function(e){return t.exportOverall()}}},[r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(t.trans("Overall Reports")))])],1)],1)]],2)],1)}),[],!1,null,null,null),k=O.exports;i()(O,{VBtn:y.a,VIcon:g.a,VList:_.a,VListItem:b.a,VListItemContent:w.a,VListItemTitle:w.b,VMenu:x.a});var C={components:{ExportReportButton:k,SkeletonShow:d},computed:{resourcesIsNotEmpty:function(){return!this.resourcesIsEmpty},resourcesIsEmpty:function(){return window._.isEmpty(this.resource.data)&&!this.resource.loading}},data:function(){return{api:s.a,resource:new n.a,resources:{data:[]}}},methods:{getResource:function(){var t=this;this.resource.loading=!0,axios.get(s.a.show(this.$route.params.id)).then((function(e){t.resource.data=e.data.data})).finally((function(){t.resource.loading=!1}))},goToCompanySurveyPage:function(t){return{name:"companies.survey",params:{id:this.$route.params.id,taxonomy:t.code,survey:t.survey&&t.survey.id||null}}}},mounted:function(){this.getResource()}},j=r(255),V=r(0),P=r(532),S=r(535),D=r(41),R=r.n(D),E=r(30),I=Object(o.a)(C,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("admin",[r("metatag",{attrs:{title:t.resource.data.name}}),t._v(" "),t.resource.loading?[r("skeleton-show")]:[r("page-header",{attrs:{back:{to:{name:"companies.index"},text:t.trans("Companies")}},scopedSlots:t._u([{key:"title",fn:function(){return[r("span",{staticClass:"mb-3",class:t.$vuetify.breakpoint.smAndUp?"":"title font-weight-bold"},[t._v(t._s(t.resource.data.name))]),t._v(" "),r("v-row",[r("v-col",{staticClass:"py-0"},[r("p",{staticClass:"mb-0"},[t._v(t._s(t.trans("Staff Strength"))+":")])]),t._v(" "),r("v-col",{staticClass:"py-0"},[r("p",{staticClass:"mb-0 font-weight-regular"},[t._v(" "+t._s(t.resource.data.metadata.staffstrength||null))])])],1),t._v(" "),r("v-row",[r("v-col",{staticClass:"py-0"},[r("p",{staticClass:"mb-0"},[t._v(t._s(t.trans("Industry"))+":")])]),t._v(" "),r("v-col",{staticClass:"py-0"},[r("p",{staticClass:"mb-0 font-weight-regular"},[t._v(" "+t._s(t.resource.data.metadata.industry||null))])])],1)]},proxy:!0},{key:"action",fn:function(){return[r("export-report-button",{attrs:{items:t.resource.data.indices}})]},proxy:!0}])}),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.resourcesIsNotEmpty,expression:"resourcesIsNotEmpty"}]},[r("p",{staticClass:"muted--text font-weight-regular"},[t._v("\n        "+t._s(t.trans("Please select the type of survey evaluation that you would like to do for :name",{name:t.resource.data.name}))+"\n      ")]),t._v(" "),r("v-row",t._l(t.resource.data.indices||[],(function(e,s){return r("v-col",{key:s,attrs:{cols:"12",sm:"6"}},[r("v-card",{directives:[{name:"ripple",rawName:"v-ripple",value:t.$vuetify.breakpoint.smAndUp?{class:"primary--text"}:null,expression:"$vuetify.breakpoint.smAndUp ? { class: 'primary--text' } : null"}],staticClass:"text-center card-carded",attrs:{hover:t.$vuetify.breakpoint.smAndUp,to:t.$vuetify.breakpoint.smAndUp?t.goToCompanySurveyPage(e):null,exact:"",height:"100%"}},[r("v-card-text",[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var n=s.on;return[e["is:finished"]?r("div",t._g({staticStyle:{position:"absolute"}},n),[r("v-icon",{attrs:{color:"success"}},[t._v("mdi-check-circle")])],1):t._e()]}}],null,!0)},[t._v(" "),r("span",[t._v(t._s(t.trans("You can now export the report")))])]),t._v(" "),r("div",{staticClass:"mb-4"},[r("img",{attrs:{height:"80",src:e.icon,alt:""}})]),t._v(" "),r("h4",{staticClass:"mb-1 text-uppercase",domProps:{textContent:t._s(e.name)}}),t._v(" "),r("p",{staticClass:"text-uppercase muted--text",domProps:{textContent:t._s("Performance Indexes")}})],1),t._v(" "),t.$vuetify.breakpoint.xsOnly?r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{block:"",large:"",text:"",color:"primary",to:t.goToCompanySurveyPage(e),exact:""}},[t._v(t._s(t.__("Start Survey")))]),t._v(" "),r("v-spacer")],1):t._e()],1)],1)})),1)],1),t._v(" "),t.resourcesIsEmpty?r("div",[r("empty-state",{scopedSlots:t._u([{key:"actions",fn:function(){return[r("v-btn",{attrs:{large:"",color:"primary",exact:"",to:{name:"indices.create"}}},[r("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-account-plus-outline")]),t._v("\n            "+t._s(t.trans("Add Index"))+"\n          ")],1)]},proxy:!0}],null,!1,455405267)})],1):t._e()]],2)}),[],!1,null,null,null);e.default=I.exports;i()(I,{VBtn:y.a,VCard:j.a,VCardActions:V.a,VCardText:V.c,VCol:c.a,VIcon:g.a,VRow:l.a,VSpacer:P.a,VTooltip:S.a}),R()(I,{Ripple:E.a})},35:function(t,e,r){"use strict";e.a=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loading=!1,this.isPrestine=!0,this.isValid=!0,this.errors=[],this.data={title:"",code:"",body:"",metadata:"",type:"",user_id:"",created:"",indices:[],answer:"",fields:[{group:"",type:"",children:[]}]}}},41:function(t,e){t.exports=function(t,e){var r="function"==typeof t.exports?t.exports.extendOptions:t.options;for(var s in"function"==typeof t.exports&&(r.directives=t.exports.options.directives),r.directives=r.directives||{},e)r.directives[s]=r.directives[s]||e[s]}}}]);
//# sourceMappingURL=5.js.map
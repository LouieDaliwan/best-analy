{"version":3,"sources":["webpack:///./src/modules/Customer/routes/api.js","webpack:///./src/modules/Customer/Reports.vue?8e9b","webpack:///src/modules/Customer/Reports.vue","webpack:///./src/modules/Customer/Reports.vue?01ce","webpack:///./src/modules/Customer/Reports.vue","webpack:///./src/modules/Customer/Models/Company.js","webpack:///./src/modules/Customer/cards/SendIndividualReportToCrmButton.vue?7d60","webpack:///./src/modules/Customer/cards/SendIndividualReportToCrmButton.vue?6536","webpack:///src/modules/Customer/cards/SendIndividualReportToCrmButton.vue","webpack:///./src/modules/Customer/cards/SendIndividualReportToCrmButton.vue"],"names":["list","owned","store","show","id","restore","update","trashed","destroy","delete","overall","customer","user","month","financialRatio","financialRatioDelete","item","customer_id","indices","surveys","submit","crm","search","save","sendDocument","sendFinancial","reports","generate","download","components","SendReportToCrmButton","SendIndividualReportToCrmButton","computed","resourcesIsNotEmpty","this","resourcesIsEmpty","window","_","isEmpty","resources","data","loading","allReportPresent","length","financialReportHasValue","resource","is_fs_has_no_zero_value","text","trans","align","value","class","sortable","methods","previewPDFReport","open","previewRatiosReport","$router","push","name","query","type","user_id","params","previewOverallReport","options","$route","changeOptionsFromRouterQueries","per_page","page","parseInt","tabletoolbar","optionsChanged","getPaginatedData","getResource","isPrestine","axios","Object","assign","askUserToDestroyReport","showDialog","color","illustration","illustrationWidth","illustrationHeight","width","title","buttons","cancel","action","callback","deleteResource","goToShowPage","goToSurveyPage","taxonomy","survey","load","val","debounce","event","srcElement","isSearching","searching","bulkTrashResource","mounted","watch","bulkCount","selected","component","_vm","_h","$createElement","_c","_self","attrs","_v","to","scopedSlots","_u","key","fn","_s","proxy","staticClass","domProps","$vuetify","breakpoint","smAndDown","on","__","_e","directives","rawName","expression","$event","headers","NaN","meta","total","toggleBulkEdit","$set","_l","j","i","ref","_g","created_at","created","author","model","$$v","VBtn","VCard","VDataTable","VIcon","VSlideYReverseTransition","VSlideYTransition","VTooltip","Company","isValid","errors","applicant","metadata","BusinessCounselorName","FileNo","FundingRequestNo","PeeBusinessCounselorName","SiteVisitDate","address","contact_person","designation","email","industry","number","staffstrength","website","cooperation","Reachable","Cooperating","Involvement","code","refnum","description","details","business_size","funding_program","industry_sector","license_no","project_location","project_name","project_type","trade_name_ar","trade_name_en","investment_value","financials","metadataOrig","props","isOverall","getElements","_elements","elements","mapKeys","v","k","mapValues","getOverallScore","o","score","sendToCrm","$store","dispatch","Id","toUpper","token","filenumber","Status","OverallScore","Comments","OverallComment","console","log","post","response","Code","Message","sendDocumentToCrm","isSending","FileContentBase64","fileContentBase64","sendBothDataToCrm"],"mappings":"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","file":"dist/js/9.js","sourcesContent":["export default {\n  list: function () {\n    return '/api/v1/customers'\n  },\n\n  owned: function () {\n    return '/api/v1/customers/owned'\n  },\n\n  store: function () {\n    return '/api/v1/customers'\n  },\n\n  show: function (id = null) {\n    return `/api/v1/customers/${id}`\n  },\n\n  restore: function (id = null) {\n    return `/api/v1/customers/restore/${id}`\n  },\n\n  update: function (id = null) {\n    return `/api/v1/customers/${id}`\n  },\n\n  trashed: function () {\n    return '/api/v1/customers/trashed'\n  },\n\n  destroy: function (id = null) {\n    return `/api/v1/customers/${id}`\n  },\n\n  delete: function (id = null) {\n    return `/api/v1/customers/delete/${id}`\n  },\n\n  overall: function (customer, user, month) {\n    return `/api/v1/reports/overall/customer/${customer}/user/${user}?month=${month}`\n  },\n\n  financialRatio: function(customer) {\n    return `/api/v1/customer/${customer}/financial-ratios`\n  },\n\n  financialRatioDelete: function(item) {\n    return `/api/v1/customers/${item.customer_id}/ratios/${item.id}/delete`\n  },\n\n  indices: {\n    list: function () {\n      return '/api/v1/indices'\n    },\n  },\n\n  surveys: {\n    submit: function (id) {\n      return `/api/v1/surveys/${id}/submit`\n    },\n\n    show: function (id) {\n      return `/api/v1/surveys/${id}`\n    },\n  },\n\n  crm: {\n    search: function (id) {\n      return `/api/v1/crm/customers/search/${id}`\n    },\n    update: function () {\n      return `/api/v1/crm/customers/update`\n    },\n    save: function () {\n      return `/api/v1/crm/customers/save`\n    },\n    sendDocument: function () {\n      return `/api/v1/crm/report/send`\n    },\n    sendFinancial: function () {\n      return `/api/v1/crm/financial/send`\n    },\n  },\n\n  reports: {\n    list: function (id) {\n      return `/api/v1/customers/${id}/reports`\n    },\n    generate: function (id) {\n      return `/api/v1/reports/${id}/generate`\n    },\n    download: function (id) {\n      return `/api/v1/reports/${id}/download`\n    },\n    delete: function (id) {\n      return `/api/v1/reports/${id}`\n    },\n    financialRatio: function(id, user) {\n      return `/api/v1/reports/financial-ratio/customers/${id}/users/${user}/financial-ratio`\n    }\n  },\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('admin',[_c('metatag',{attrs:{\"title\":_vm.resource.data.name}}),_vm._v(\" \"),_c('page-header',{attrs:{\"back\":{ to: { name: 'companies.show' }, text: _vm.trans('Back') }},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_vm._v(_vm._s(_vm.resource.data.name))]},proxy:true},{key:\"utilities\",fn:function(){return [_c('h4',{staticClass:\"muted--text\",domProps:{\"textContent\":_vm._s(_vm.trans('Reports List'))}})]},proxy:true},{key:\"action\",fn:function(){return [(_vm.allReportPresent)?_c('v-btn',{attrs:{\"block\":_vm.$vuetify.breakpoint.smAndDown,\"color\":\"primary\",\"exact\":\"\",\"large\":\"\"},on:{\"click\":_vm.previewOverallReport}},[_c('v-icon',{attrs:{\"small\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-file-chart-outline\")]),_vm._v(\"\\n        \"+_vm._s(_vm.__(\"Overall Report\"))+\"\\n      \")],1):_vm._e()]},proxy:true}])}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.resourcesIsNotEmpty),expression:\"resourcesIsNotEmpty\"}]},[_c('v-card',[_c('toolbar-menu',{attrs:{\"items\":_vm.tabletoolbar},on:{\"update:items\":function($event){_vm.tabletoolbar=$event},\"update:search\":_vm.search},scopedSlots:_vm._u([{key:\"filter\",fn:function(){return [_c('monthly-picker')]},proxy:true}])}),_vm._v(\" \"),_c('v-slide-y-reverse-transition',{attrs:{\"mode\":\"out-in\"}},[_c('v-data-table',{attrs:{\"headers\":_vm.resources.headers,\"items\":_vm.resources.data,\"loading\":_vm.resources.loading,\"mobile-breakpoint\":NaN,\"options\":_vm.resources.options,\"server-items-length\":_vm.resources.meta.total,\"show-select\":_vm.tabletoolbar.toggleBulkEdit,\"color\":\"primary\",\"item-key\":\"id\"},on:{\"update:options\":[function($event){return _vm.$set(_vm.resources, \"options\", $event)},_vm.optionsChanged]},scopedSlots:_vm._u([{key:\"progress\",fn:function(){return [_c('span')]},proxy:true},{key:\"loading\",fn:function(){return [_c('v-slide-y-transition',{attrs:{\"mode\":\"out-in\"}},[_c('div',_vm._l((_vm.resources.options.itemsPerPage),function(j,i){return _c('div',{key:i},[_c('skeleton-table')],1)}),0)])]},proxy:true},{key:\"item.key\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('span',_vm._g({staticClass:\"mt-1\"},on),[_c('router-link',{staticClass:\"text-no-wrap text--decoration-none\",attrs:{\"tag\":\"a\",\"exact\":\"\",\"to\":_vm.goToShowPage(item)},domProps:{\"textContent\":_vm._s(item.key)}})],1)]}}],null,true)},[_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.trans(\"View Preview Report\")))])])]}},{key:\"item.created_at\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('span',{staticClass:\"text-no-wrap\",attrs:{\"title\":item.created_at}},[_vm._v(_vm._s(_vm.trans(item.created)))])]}},{key:\"item.user_id\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('span',{staticClass:\"text-no-wrap\",domProps:{\"textContent\":_vm._s(item.author)}})]}},{key:\"item.action\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"text-no-wrap\"},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('span',_vm._g({},on),[_c('send-individual-report-to-crm-button',{attrs:{\"item\":item,\"user\":item.user_id}})],1)]}}],null,true)},[_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.trans(\"Send\"))+\" \"+_vm._s(item.key)+\" \"+_vm._s(_vm.__(\"to CRM\")))])]),_vm._v(\" \"),_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"to\":_vm.goToSurveyPage(item),\"icon\":\"\"}},on),[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-file-table\")])],1)]}}],null,true)},[_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.trans(\"View Survey\")))])]),_vm._v(\" \"),_c('can',{attrs:{\"code\":\"reports.delete\"}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.askUserToDestroyReport(item)}}},on),[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-delete-outline\")])],1)]}}],null,true)},[_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.trans(\"Delete report permanently\")))])])],1)],1)]}}]),model:{value:(_vm.resources.selected),callback:function ($$v) {_vm.$set(_vm.resources, \"selected\", $$v)},expression:\"resources.selected\"}})],1)],1)],1),_vm._v(\" \"),(_vm.resourcesIsEmpty)?_c('div',[_c('toolbar-menu',{attrs:{\"items\":_vm.tabletoolbar},on:{\"update:items\":function($event){_vm.tabletoolbar=$event},\"update:search\":_vm.search},scopedSlots:_vm._u([{key:\"filter\",fn:function(){return [_c('monthly-picker')]},proxy:true}],null,false,59150502)}),_vm._v(\" \"),_c('empty-state',{scopedSlots:_vm._u([{key:\"actions\",fn:function(){return [_c('v-btn',{attrs:{\"large\":\"\",\"color\":\"primary\",\"exact\":\"\",\"to\":{ name: 'companies.show' }}},[_c('v-icon',{attrs:{\"small\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-credit-card-outline\")]),_vm._v(\"\\n          \"+_vm._s(_vm.trans(\"Back to Indices\"))+\"\\n        \")],1)]},proxy:true}],null,false,3068003224)})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <admin>\n    <metatag :title=\"resource.data.name\"></metatag>\n\n    <page-header\n      :back=\"{ to: { name: 'companies.show' }, text: trans('Back') }\"\n    >\n      <template v-slot:title>{{ resource.data.name }}</template>\n      <template v-slot:utilities>\n        <h4 class=\"muted--text\" v-text=\"trans('Reports List')\"></h4>\n      </template>\n\n      <template v-slot:action>\n        <!-- <v-btn\n          :block=\"$vuetify.breakpoint.smAndDown\"\n          @click=\"previewRatiosReport\"\n          color=\"primary\"\n          exact\n          large\n          text\n          class=\"mr-3\"\n        >\n          <v-icon small left>mdi-table-eye</v-icon>\n          {{ __(\"Financial Analysis Report\") }}\n        </v-btn> -->\n\n        <v-btn\n          :block=\"$vuetify.breakpoint.smAndDown\"\n          @click=\"previewOverallReport\"\n          color=\"primary\"\n          exact\n          large\n          v-if=\"allReportPresent\"\n        >\n          <v-icon small left>mdi-file-chart-outline</v-icon>\n          {{ __(\"Overall Report\") }}\n        </v-btn>\n      </template>\n    </page-header>\n\n    <!-- Data table -->\n    <div v-show=\"resourcesIsNotEmpty\">\n      <v-card>\n        <toolbar-menu :items.sync=\"tabletoolbar\" @update:search=\"search\">\n          <template v-slot:filter>\n            <monthly-picker></monthly-picker>\n          </template>\n        </toolbar-menu>\n        <v-slide-y-reverse-transition mode=\"out-in\">\n          <v-data-table\n            :headers=\"resources.headers\"\n            :items=\"resources.data\"\n            :loading=\"resources.loading\"\n            :mobile-breakpoint=\"NaN\"\n            :options.sync=\"resources.options\"\n            :server-items-length=\"resources.meta.total\"\n            :show-select=\"tabletoolbar.toggleBulkEdit\"\n            @update:options=\"optionsChanged\"\n            color=\"primary\"\n            item-key=\"id\"\n            v-model=\"resources.selected\"\n          >\n            <template v-slot:progress><span></span></template>\n\n            <template v-slot:loading>\n              <v-slide-y-transition mode=\"out-in\">\n                <div>\n                  <div\n                    v-for=\"(j, i) in resources.options.itemsPerPage\"\n                    :key=\"i\"\n                  >\n                    <skeleton-table></skeleton-table>\n                  </div>\n                </div>\n              </v-slide-y-transition>\n            </template>\n\n            <!-- Name -->\n            <template v-slot:item.key=\"{ item }\">\n              <v-tooltip bottom>\n                <template v-slot:activator=\"{ on }\">\n                  <span class=\"mt-1\" v-on=\"on\"\n                    ><router-link\n                      tag=\"a\"\n                      exact\n                      :to=\"goToShowPage(item)\"\n                      v-text=\"item.key\"\n                      class=\"text-no-wrap text--decoration-none\"\n                    ></router-link\n                  ></span>\n                </template>\n                <span>{{ trans(\"View Preview Report\") }}</span>\n              </v-tooltip>\n            </template>\n            <!-- Name -->\n\n            <!-- Created -->\n            <template v-slot:item.created_at=\"{ item }\">\n              <span class=\"text-no-wrap\" :title=\"item.created_at\">{{\n                trans(item.created)\n              }}</span>\n            </template>\n            <!-- Created -->\n\n            <!-- Author -->\n            <template v-slot:item.user_id=\"{ item }\">\n              <span class=\"text-no-wrap\" v-text=\"item.author\"></span>\n            </template>\n            <!-- Author -->\n\n            <!-- Action buttons -->\n            <template v-slot:item.action=\"{ item }\">\n              <div class=\"text-no-wrap\">\n                <!-- Send Report -->\n                <v-tooltip bottom>\n                  <template v-slot:activator=\"{ on }\">\n                    <span v-on=\"on\"\n                      ><send-individual-report-to-crm-button\n                        :item=\"item\"\n                        :user=\"item.user_id\"\n                      ></send-individual-report-to-crm-button\n                    ></span>\n                    <!-- <span v-on=\"on\"><send-report-to-crm-button :customer=\"item.customer.id\" :user=\"item.user_id\"></send-report-to-crm-button></span> -->\n                  </template>\n                  <span\n                    >{{ trans(\"Send\") }} {{ item.key }} {{ __(\"to CRM\") }}</span\n                  >\n                </v-tooltip>\n                <!-- Send Report -->\n                <!-- Show Reports -->\n                <v-tooltip bottom>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-btn :to=\"goToSurveyPage(item)\" icon v-on=\"on\">\n                      <v-icon small>mdi-file-table</v-icon>\n                    </v-btn>\n                  </template>\n                  <span>{{ trans(\"View Survey\") }}</span>\n                </v-tooltip>\n                <!-- Show Reports -->\n                <!-- Move to Trash -->\n                <can code=\"reports.delete\">\n                  <v-tooltip bottom>\n                    <template v-slot:activator=\"{ on }\">\n                      <v-btn\n                        @click=\"askUserToDestroyReport(item)\"\n                        icon\n                        v-on=\"on\"\n                      >\n                        <v-icon small>mdi-delete-outline</v-icon>\n                      </v-btn>\n                    </template>\n                    <span>{{ trans(\"Delete report permanently\") }}</span>\n                  </v-tooltip>\n                </can>\n                <!-- Move to Trash -->\n              </div>\n            </template>\n            <!-- Action buttons -->\n          </v-data-table>\n        </v-slide-y-reverse-transition>\n      </v-card>\n    </div>\n    <!-- Data table -->\n\n    <!-- Empty state -->\n    <div v-if=\"resourcesIsEmpty\">\n      <toolbar-menu :items.sync=\"tabletoolbar\" @update:search=\"search\">\n        <template v-slot:filter>\n          <monthly-picker></monthly-picker>\n        </template>\n      </toolbar-menu>\n      <empty-state>\n        <template v-slot:actions>\n          <v-btn large color=\"primary\" exact :to=\"{ name: 'companies.show' }\">\n            <v-icon small left>mdi-credit-card-outline</v-icon>\n            {{ trans(\"Back to Indices\") }}\n          </v-btn>\n        </template>\n      </empty-state>\n    </div>\n    <!-- Empty state -->\n  </admin>\n</template>\n\n<script>\nimport $auth from \"@/core/Auth/auth\";\nimport $api from \"./routes/api\";\nimport Company from \"./Models/Company\";\nimport SendReportToCrmButton from \"@/modules/Customer/cards/SendReportToCrmButton.vue\";\nimport SendIndividualReportToCrmButton from \"@/modules/Customer/cards/SendIndividualReportToCrmButton.vue\";\nimport { mapActions } from \"vuex\";\n\nexport default {\n  components: {\n    SendReportToCrmButton,\n    SendIndividualReportToCrmButton\n  },\n\n  computed: {\n    resourcesIsNotEmpty() {\n      return !this.resourcesIsEmpty;\n    },\n\n    resourcesIsEmpty() {\n      return window._.isEmpty(this.resources.data) && !this.resources.loading;\n    },\n\n    allReportPresent() {\n      return this.resources.data.length == 4;\n    },\n\n    financialReportHasValue() {\n      return this.resource.data.is_fs_has_no_zero_value;\n    }\n  },\n\n  data: () => ({\n    resource: new Company(),\n    resources: {\n      loading: true,\n      search: null,\n      options: {\n        page: 1,\n        pageCount: 0,\n        itemsPerPage: 10,\n        sortDesc: [],\n        sortBy: []\n      },\n      meta: {},\n      modes: {\n        bulkedit: false\n      },\n      selected: [],\n      headers: [\n        {\n          text: trans(\"Report Type\"),\n          align: \"left\",\n          value: \"key\",\n          class: \"text-no-wrap\"\n        },\n        {\n          text: trans(\"Generated By\"),\n          align: \"left\",\n          value: \"user_id\",\n          class: \"text-no-wrap\"\n        },\n        {\n          text: trans(\"Site Visit Date\"),\n          align: \"center\",\n          value: \"remarked\",\n          class: \"text-no-wrap\"\n        },\n        {\n          text: trans(\"Actions\"),\n          align: \"center\",\n          value: \"action\",\n          sortable: false,\n          class: \"muted--text text-no-wrap\"\n        }\n      ],\n      data: []\n    },\n\n    tabletoolbar: {\n      bulkCount: 0,\n      isSearching: false,\n      search: null,\n      listGridView: false,\n      toggleBulkEdit: false,\n      toggleTrash: false,\n      verticaldiv: false\n    }\n  }),\n\n  methods: {\n    ...mapActions({\n      errorDialog: \"dialog/error\",\n      loadDialog: \"dialog/loading\",\n      showDialog: \"dialog/show\",\n      hideDialog: \"dialog/hide\",\n      showSnackbar: \"snackbar/show\"\n    }),\n\n    previewPDFReport(item) {\n      window.open(\n        `/best/reports/pdf/preview?report_id=${item.id}&type=index`,\n        \"_blank\"\n      );\n    },\n\n    previewRatiosReport() {\n      this.$router.push({\n        name: \"reports.ratios\",\n        query: {\n          type: \"ratios\",\n          user_id: $auth.getId()\n        },\n        params: { id: this.$route.params.id }\n      });\n    },\n\n    previewOverallReport() {\n      this.$router.push({\n        name: \"reports.overall\",\n        query: {\n          type: \"overall\",\n          user_id: $auth.getId(),\n          month: this.resources.options.month\n        },\n        params: {\n          id: this.$route.params.id,\n          month: this.resources.options.month\n        }\n      });\n    },\n\n    changeOptionsFromRouterQueries() {\n      this.options.per_page = this.$route.query.per_page;\n      this.options.page = parseInt(this.$route.query.page);\n      this.options.search = this.$route.query.search;\n      this.resources.search = this.options.search;\n      this.tabletoolbar.search = this.options.search;\n    },\n\n    optionsChanged(options) {\n      this.getPaginatedData(this.options);\n    },\n\n    getResource() {\n      this.resource.loading = true;\n      this.resource.isPrestine = false;\n      axios\n        .get($api.show(this.$route.params.id))\n        .then(response => {\n          this.resource.data = response.data.data;\n        })\n        .finally(() => {\n          this.load(false);\n          this.resource.isPrestine = true;\n        });\n    },\n\n    getPaginatedData(params = null, caller = null) {\n      params = Object.assign(params ? params : this.$route.query, {\n        search: this.resources.search\n      });\n      this.resources.loading = true;\n      axios\n        .get($api.reports.list(this.$route.params.id), { params })\n        .then(response => {\n          this.resources = Object.assign({}, this.resources, response.data);\n          this.resources.options = Object.assign(\n            this.resources.options,\n            response.data.meta,\n            params\n          );\n          this.resources.loading = false;\n          this.$router\n            .push({ query: Object.assign({}, this.$route.query, params) })\n            .catch(err => {});\n        })\n        .catch(err => {\n          this.errorDialog({\n            width: 400,\n            buttons: { cancel: { show: false } },\n            title: trans(\"Whoops! An error occured\"),\n            text: err.response.data.message\n          });\n        })\n        .finally(() => {\n          this.resources.data.map(function(data) {\n            return Object.assign(data, { loading: false });\n          });\n        });\n    },\n\n    askUserToDestroyReport(item) {\n      this.showDialog({\n        color: \"error\",\n        illustration: () =>\n          import(\"@/components/Icons/ManThrowingAwayPaperIcon.vue\"),\n        illustrationWidth: 200,\n        illustrationHeight: 160,\n        width: \"420\",\n        title: \"You are about to permanently delete the selected report.\",\n        text: [\n          \"Some data related to report will still remain.\",\n          trans(\"Are you sure you want to permanently delete :name?\", {\n            name: item.key\n          })\n        ],\n        buttons: {\n          cancel: { show: true, color: \"link\" },\n          action: {\n            text: \"Delete\",\n            color: \"error\",\n            callback: dialog => {\n              this.loadDialog(true);\n              this.deleteResource(item);\n            }\n          }\n        }\n      });\n    },\n\n    deleteResource(item) {\n      item.loading = true;\n      axios\n        .delete($api.reports.delete(item.id))\n        .then(response => {\n          item.active = false;\n          this.getPaginatedData(null);\n          this.hideDialog();\n          this.showSnackbar({\n            text: trans_choice(\"Report successfully deleted\", 1)\n          });\n        })\n        .catch(err => {\n          this.errorDialog({\n            width: 400,\n            buttons: { cancel: { show: false } },\n            title: trans(\"Whoops! An error occured\"),\n            text: err.response.data.message\n          });\n        })\n        .finally(() => {\n          item.active = false;\n          item.loading = false;\n        });\n    },\n\n    goToShowPage(item) {\n      return {\n        name: \"reports.show\",\n        params: { id: this.$route.params.id, report: item.id }\n      };\n    },\n\n    goToSurveyPage(item) {\n      return {\n        name: \"companies.response\",\n        query: { month: item.remarks },\n        params: {\n          id: this.$route.params.id,\n          taxonomy: item.value[\"current:index\"][\"taxonomy\"][\"id\"] || null,\n          survey: item.value[\"survey:id\"]\n        }\n      };\n    },\n\n    load(val = true) {\n      this.resource.loading = val;\n    },\n\n    search: _.debounce(function(event) {\n      this.resources.search = event.srcElement.value || \"\";\n      this.tabletoolbar.isSearching = false;\n      if (this.resources.searching) {\n        this.getPaginatedData(this.options, \"search\");\n        this.resources.searching = false;\n      }\n    }, 200),\n\n    bulkTrashResource() {\n      let selected = this.selected;\n      axios\n        .delete($api.reports.destroy(null), { data: { id: selected } })\n        .then(response => {\n          this.getPaginatedData(null, \"bulkTrashResource\");\n          this.tabletoolbar.toggleTrash = false;\n          this.tabletoolbar.toggleBulkEdit = false;\n          this.hideDialog();\n          this.showSnackbar({\n            text: trans_choice(\n              \"Company successfully moved to trash\",\n              this.tabletoolbar.bulkCount\n            )\n          });\n        })\n        .catch(err => {\n          this.errorDialog({\n            width: 400,\n            buttons: { cancel: { show: false } },\n            title: trans(\"Whoops! An error occured\"),\n            text: err.response.data.message\n          });\n        });\n    }\n  },\n\n  mounted() {\n    this.getResource();\n    this.getPaginatedData();\n  },\n\n  watch: {\n    \"resources.search\": function(val) {\n      this.resources.searching = true;\n    },\n\n    \"resources.selected\": function(val) {\n      this.tabletoolbar.bulkCount = val.length;\n    },\n\n    \"tabletoolbar.toggleBulkEdit\": function(val) {\n      if (!val) {\n        this.resources.selected = [];\n      }\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vuetify-loader/lib/loader.js??ref--14-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reports.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vuetify-loader/lib/loader.js??ref--14-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reports.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Reports.vue?vue&type=template&id=665ac800&\"\nimport script from \"./Reports.vue?vue&type=script&lang=js&\"\nexport * from \"./Reports.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSlideYReverseTransition } from 'vuetify/lib/components/transitions';\nimport { VSlideYTransition } from 'vuetify/lib/components/transitions';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VCard,VDataTable,VIcon,VSlideYReverseTransition,VSlideYTransition,VTooltip})\n","class Company {\n  constructor() {\n    this.loading = false;\n    this.isPrestine = true;\n    this.isValid = true;\n    this.errors = [];\n\n    this.data = {\n      applicant: {\n        customer_id: null,\n        metadata: {\n          BusinessCounselorName: null,\n          FileNo: null,\n          FundingRequestNo: null,\n          PeeBusinessCounselorName: null,\n          SiteVisitDate: null,\n          address: null,\n          contact_person: null,\n          designation: null,\n          email: null,\n          industry: null,\n          name: null,\n          number: null,\n          staffstrength: null,\n          website: null,\n          cooperation: {\n            Reachable: null,\n            Cooperating: null,\n            Involvement: null,\n            \"Duration of Overdue (DPD)\": null\n          }\n        }\n      },\n      name: \"\",\n      code: \"\",\n      refnum: \"\",\n      description: \"\",\n      details: {\n        customer_id: null,\n        metadata: {\n          business_size: null,\n          description: null,\n          funding_program: null,\n          industry_sector: null,\n          license_no: null,\n          project_location: null,\n          project_name: null,\n          project_type: null,\n          trade_name_ar: null,\n          trade_name_en: null,\n          investment_value: null,\n        }\n      },\n      metadata: {\n        type: \"\",\n        applicant: {\n          name: \"\"\n        }\n      },\n      financials: this.metadataOrig,\n      reports: []\n    };\n  }\n}\n\nexport default Company;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-btn',{attrs:{\"loading\":_vm.isSending,\"disabled\":_vm.isSending,\"icon\":\"\"},on:{\"click\":_vm.sendDocumentToCrm}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-send\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vuetify-loader/lib/loader.js??ref--14-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SendIndividualReportToCrmButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vuetify-loader/lib/loader.js??ref--14-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SendIndividualReportToCrmButton.vue?vue&type=script&lang=js&\"","<template>\n  <v-btn :loading=\"isSending\" :disabled=\"isSending\" @click=\"sendDocumentToCrm\" icon>\n    <v-icon small>mdi-send</v-icon>\n  </v-btn>\n</template>\n\n<script>\nimport $api from '@/modules/Customer/routes/api'\n\nexport default {\n  props: ['item', 'user', 'type'],\n\n  data: () => ({\n    isSending: false,\n    resource: {\n      data: {}\n    },\n  }),\n\n  computed: {\n    isOverall () {\n      return this.type == 'overall'\n    },\n  },\n\n  methods: {\n    // getReportData () {\n    //   return new Promise((resolve, reject) => {\n    //     let customer = this.item\n    //     let user = this.user\n    //     axios.get(\n    //       `/api/v1/reports/overall/customer/${customer}/user/${user}`\n    //     ).then(response => {\n    //       resolve(response)\n    //     }).catch(err => {\n    //       reject(err)\n    //     })\n    //   })\n    // },\n\n    getElements () {\n      let report = this.item.value || {}\n      let _elements = {}\n\n      _elements = report['current:index'].elements;\n\n      _elements = _.mapKeys(_elements, function (v, k) { return k.replace(/[^a-zA-Z]/g, ''); });\n      _elements = _.mapKeys(_elements, function (v, k) { return k.replace(/\\s+/g, ''); });\n\n      _elements = _.mapValues(_elements, function (v, k) { return v * 100; });\n\n      return _elements;\n    },\n\n    getOverallScore () {\n      let score = this.item.value['current:index']['overall:total'];\n      let pindex = this.item.value['current:index'];\n      let code = 'OverallScore';\n\n      switch (pindex['pindex:code']) {\n        case 'FMPI':\n          code = 'Financial'+code;\n          break;\n\n        case 'PMPI':\n          code = 'Productivity'+code;\n          break;\n\n        case 'HRPI':\n          code = 'HR'+code;\n          break;\n\n        case 'BSPI':\n          code = 'Sustainability'+code;\n          break;\n      }\n\n      let o = {};\n      o[code] = score;\n\n      return o;\n    },\n\n    sendToCrm () {\n      this.$store.dispatch('snackbar/show', { button: { show: false }, timeout: 0, text: 'Sending report to CRM. Please wait...'});\n\n      if (! this.item.customer) {\n        this.$store.dispatch('snackbar/show', { text: 'No report data found.'});\n\n        return false;\n      }\n\n      // console.log('e', this.getElements());\n\n      let data = Object.assign(this.getOverallScore(), this.getElements(), {\n        Id: _.toUpper(this.item.customer.token),\n        FileNo: this.item.customer.filenumber,\n        Status: 100000006,\n        OverallScore: (this.item.value['overall:score'] || 0) * 100,\n        // FileContentBase64: this.item.fileContentBase64,\n        Comments: this.item['overall:comment'] || 'No comment',\n        OverallComment: this.item.value['overall:comment'] || null,\n        'Lessons Learnt': this.item.value['overall:comment'] || null,\n      })\n\n      console.log('data:scores', data);\n\n      this.$store.dispatch('snackbar/show', { icon: 'mdi-spin mdi-loading', button: { show: false }, timeout: 0, text: 'Sending report to CRM. Establishing connection to CRM...'});\n\n\n      axios.post(\n        `/api/v1/crm/customers/save`, data\n      ).then(response => {\n        this.$store.dispatch('snackbar/hide')\n\n        if (response.data.Code == 1) {\n          this.$store.dispatch('snackbar/show', { icon: false, timeout: 8000, button: {show: true}, text: trans('Successfully sent to CRM')})\n        } else {\n          this.$store.dispatch('dialog/error', {\n            show: true,\n            width: 400,\n            buttons: { cancel: { show: false } },\n            title: 'Returned a Code ' + response.data.Code,\n            text: response.data.Message,\n          })\n        }\n      }).catch(err => {\n        this.$store.dispatch('snackbar/show', { icon: false, timeout: 8000, button: {show: true}, text: trans('Unable to connect to CRM. Please check your network connection')})\n      })\n    },\n\n    sendDocumentToCrm () {\n      this.isSending = true;\n\n      let data = {\n        Id: _.toUpper(this.item.customer.token),\n        FileContentBase64: this.item.fileContentBase64,\n      }\n\n      this.$store.dispatch('snackbar/show', { icon: 'mdi-spin mdi-loading', button: { show: false }, timeout: 0, text: 'Sending Overall Report Document to CRM. Establishing connection to CRM...'});\n\n      axios.post(\n        $api.crm.sendDocument(), data\n      ).then(response => {\n        this.$store.dispatch('snackbar/hide')\n\n        if (response.data.Code == 1) {\n          this.$store.dispatch('snackbar/show', { icon: false, timeout: 8000, button: {show: true}, text: trans('File Successfully sent to CRM')})\n        } else {\n          this.$store.dispatch('dialog/error', {\n            show: true,\n            width: 400,\n            buttons: { cancel: { show: false } },\n            title: 'Returned a Code ' + response.data.Code,\n            text: response.data.Message,\n          })\n        }\n      }).catch(err => {\n        this.$store.dispatch('snackbar/show', { icon: false, timeout: 8000, button: {show: true}, text: trans('Unable to connect to CRM. Please check your network connection')})\n      }).finally(() => {\n        this.isSending = false;\n      });\n    },\n\n    sendBothDataToCrm () {\n      this.sendToCrm()\n      this.sendDocumentToCrm()\n    },\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./SendIndividualReportToCrmButton.vue?vue&type=template&id=f5594192&\"\nimport script from \"./SendIndividualReportToCrmButton.vue?vue&type=script&lang=js&\"\nexport * from \"./SendIndividualReportToCrmButton.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VIcon})\n"],"sourceRoot":""}